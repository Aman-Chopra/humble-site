(function(C,h,q){C.execute(function(){h.$Nav.build("sx.iss.TemplateEngine",function(){var h={};return function a(b,c){var e=/^[a-zA-Z0-9_-]+$/.test(b)?h[b]=h[b]||a(document.getElementById(b).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');");
return c?e(c):e}});h.$Nav.when("sx.iss.DebugUtils","sx.iss.DomUtils").build("sx.iss.EventBus.instance",function(h,d){return new function(){function a(a){var b=typeof a,c="";"object"===b&&a.hasOwnProperty("name")?c=a.name:"string"===b&&(c=a);return c}var b={},c={};this.listen=function(c,m,g){var f,k="";if(d.isArray(c)){for(f=0;f<c.length;f++)k=c[f],this.listen(k,m,g),h.logDebug("Listening for: "+k);return this}k=a(c);b[k]||(b[k]=[]);b[k].push({f:m,o:g});h.logDebug("Listening for: "+k);
return this};this.trigger=function(c,d){var g=a(c);h.logDebugWithTrace("Trigger: "+g,d);var g=b[g],f;if(g){for(f=0;f<g.length;f++)g[f].f.call(g[f].o,d);return this}};this.triggerThrottledEvent=function(e,d,g){var f=a(e);h.logDebugWithTrace("Trigger (throttled): "+f,d);var k=b[f];e=c[f];if(k)return g===q&&(g=100),e&&(clearTimeout(e),delete c[f]),e=setTimeout(function(){var a;for(a=0;a<k.length;a++)k[a].f.call(k[a].o,d);delete c[f]},g),c[f]=e,this}}});h.$Nav.when("sx.iss.DebugUtils","sx.iss.DomUtils").build("sx.iss.IssContext",
function(h,d){var a,b,c=[];return{getFastlabs:function(){return b},setFastlabs:function(a){b=a},getTriggeredFastlabs:function(){return c},clearTriggeredFastlabs:function(){c=[]},addTriggeredFastlabs:function(a){c=c.concat(a)},getConfiguration:function(){return a},setConfiguration:function(b){a=b}}});h.$Nav.build("sx.iss.suggestionUtils",function(){var h=/\s/;return{getPrefixPos:function(d,a){return d.toLowerCase().indexOf(a.toLowerCase())},getPrefixPosMultiWord:function(d,a){var b=d.toLowerCase().indexOf(a.toLowerCase()),
c;if(-1===b)return-1;if(0===b)return 0;c=d[b-1];return" "===c||"\t"===c||c.match(h)?b:-1},splitStringForDisplay:function(d,a,b){return{bprefix:d.substr(0,a),prefix:d.substr(a,b),suffix:d.substr(a+b)}}}});h.$Nav.when("sx.iss.TimingProvider.instance","sx.iss.EventBus.instance","sx.iss.suggestionUtils").build("sx.iss.utils",function(h,d,a){return{timingProvider:h,eventBus:d,suggestionUtils:a}});h.$Nav.when("$").build("sx.iss.DomUtils",function(h){var d=/\+/g,a=/^\s+/;(function(){Array.prototype.indexOf||
(Array.prototype.indexOf=function(a,c){var e=this.length>>>0,d=Number(c)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=e);d<e;d++)if(d in this&&this[d]===a)return d;return-1})})();return{isHoveredClass:"is-hovered",getKeyword:function(b){return(b=b.val())?b.replace(a,""):b},isElHoveredOver:function(a){return a.hasClass("is-hovered")},hoverOverEl:function(a){return a.addClass("is-hovered")},hoverOutEl:function(a){return a.removeClass("is-hovered")},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},
getFormParams:function(a){a=a.split("?");for(var c=1<a.length?a[1]:q,c=c?c.split("&"):[],e=c.length,m;0<e--;)m=c[e].split("="),c[e]={name:m[0],value:m[1].replace(d," ")};return{uri:a[0],formParams:c}},suggestionClass:".s-suggestion",hiddenInputValue:"frmDynamic",hiddenInputClass:".frmDynamic",areAnySuggestionsHoveredOver:function(a){return 0<a.find(".is-hovered").length},getCursorPosition:function(a){a=a.get(0);if("selectionStart"in a)return a.selectionStart;if(document.selection){a.focus();var c=
document.selection.createRange(),e=c.text.length;c.moveStart("character",-a.value.length);return c.text.length-e}return-1}}});h.$Nav.build("sx.iss.DebugUtils",function(){function u(a){if(a&&0<a.length){a=a.substring(1).split("&");for(var b=0;b<a.length;b++){var d=a[b].split("=");if("debug"===d[0]){for(var f in c)c.hasOwnProperty(f)&&(c[f]=-1!==d[1].indexOf(f)?!0:!1);break}}}}function d(){return c.iss||c.isstrace}function a(){return c.isstrace}function b(a,b){d()&&h.console&&(b!==q?console.debug(a,
b):console.debug(a))}var c={iss:!1,isstrace:!1,noiss:!1,isspolyfill:!1,isscf:!1};u(h.location.search);return{init:u,logDebug:b,logDebugWithTrace:function(c,d){b(c,d);a()&&console.trace()},isDebugModeOn:d,isDebugModeOnWithTrace:a,isDisableISS:function(){return c.noiss},isUsingPolyFill:function(){return c.isspolyfill},isQIAEnabled:function(){return c.isscf}}});h.$Nav.build("sx.iss.ObjectUtils",function(){return{freeze:function(h){Object.freeze&&h&&Object.freeze(h)}}});h.$Nav.when("$",
"sx.iss.DebugUtils").run(function(u,d){d.isDisableISS()||(u.fn.delegate&&!d.isUsingPolyFill()||u.extend(u.fn,{delegate:function(a,b,c){return this.bind(b,function(b){var m=u(b.target);if(m.is(a)||0<m.parents(a).length)return d.logDebug("delegate ",{selector:a,target:m,event:b}),c.apply(m,arguments)})}}),h.$Nav.declare("sx.iss.DependenciesMet"))});h.$Nav.when("sx.iss.DepartmentDataFormatter").build("sx.iss.DepartmentData",function(h){return{getData:function(){return[]}}});
h.$Nav.build("sx.iss.DepartmentDataFormatter",function(){return{format:function(h){for(var d=[],a=0;a<h.length;a++){var b=h[a];d.push({id:b[0],alias:b[0],keyword:"",type:"department",store:b[1],name:"",triggerWords:b[2],sn:!1})}return d}}});h.$Nav.when("sx.iss.ObjectUtils").build("sx.iss.SuggestionTypes",function(h){var d={a9:{name:"a9",reftag:"i",templateId:"s-suggestion"},a9Xcat:{name:"a9-xcat",reftag:"c",templateId:"s-suggestion"},a9XOnly:{name:"a9-xcat-only",reftag:"xo",source:"xo",
templateId:"s-suggestion"},a9Corpus:{name:"a9-corpus",reftag:"cp",reftagTemplate:"REF_TAG",templateId:"s-corpus"},department:{name:"department",reftag:"deptiss",templateId:"s-department"}};h.freeze(d);return d});h.$Nav.when("sx.iss.ObjectUtils").build("sx.iss.InfoTypes",function(h){var d={actor:"actor",author:"author",director:"director",seasonTitle:"season_title",title:"title"};h.freeze(d);return d});h.$Nav.build("sx.iss.DataAttributes",function(){return{fallback:{name:"isfb"},
spellCorrected:{name:"issc"}}});h.$Nav.build("sx.iss.TimingEvents",function(){return{latency:{group:"Latency",events:{timeToDisplay:"timeToDisplay"}}}});h.$Nav.when("sx.iss.DebugUtils").build("sx.iss.Events",function(h){function d(){var a=Date.now();return{uid:a,suggestionsReadyForDisplay:{name:"suggestionsReadyForDisplay-"+a},suggestionsReady:{name:"suggestionsReady-"+a},suggestionsRendered:{name:"suggestionsRendered-"+a},updateSearchBox:{name:"updateSearchBox-"+a},selectionChange:{name:"selectionChange-"+
a},dropdownHidden:{name:"dropdownHidden-"+a},updateSearchTerm:{name:"updateSearchTerm-"+a},suggestionClicked:{name:"suggestionClicked-"+a},suggestionsNeeded:{name:"suggestionsNeeded-"+a},a9SuggestionsNeeded:{name:"a9-suggestionsNeeded-"+a},noSuggestions:{name:"nosuggestions-"+a},searchBoxFocusIn:{name:"searchBoxFocusIn-"+a},searchBoxFocusOut:{name:"searchBoxFocusOut-"+a},keydown:{name:"keydown-"+a},hideDropdown:{name:"hidedropdown-"+a},focusOnParent:{name:"focusOnParent-"+a},parentFocused:{name:"parentFocused-"+
a},parentLostFocus:{name:"parentLostFocus-"+a},searchTermChanged:{name:"searchTermChanged-"+a},suggestionsDisplayed:{name:"suggestionsDisplayed-"+a},upArrowPressed:{name:"upArrowPressed-"+a},downArrowPressed:{name:"downArrowPressed-"+a}}}return{globals:{issLoaded:{name:"issLoaded"},suggestionsRendered:{name:"suggestionsRendered"},initializeNavSearchBox:{name:"initializeSearchBox"}},createInstance:function(){return new d},createEvent:function(a,b){var c=b;b.hasOwnProperty("name")?c=b.name:"string"===
typeof b?c=b:h.logDebug('Format of "event" parameter is not a string or an event object',b);return a+"-"+c}}});h.$Nav.when("sx.iss.ObjectUtils").build("sx.iss.Platform",function(h){var d={name:"mobile",cid:"amazon-search-ui-mobile",callback:"String",needExtraParams:!1};h.freeze(d);return d});h.$Nav.when("$").build("sx.iss.TimingProvider.instance",function(h){return new function(){var d={};this.startTimer=function(a,b){d[a]||(d[a]={});d[a][b]={start:+new Date}};this.stopTimer=function(a,
b){var c=d[a]&&d[a][b];if(!c)return-1;c.end=+new Date;return c.end-c.start};this.getTimings=function(a){return d[a]};this.getTimingStats=function(a){var b={name:a},c=0,e=0,m=q,g=q,f=0,k=0,l=[],n=0,p=0;if(!d[a])return q;h.each(d[a],function(a,b){if(b.start&&b.end){k=b.end-b.start;l.push(k);f++;e+=k;if(!m||k<m)m=k;if(!g||k>g)g=k}});l.sort();b.n=f;b.avg=e/f;b.min=m;b.max=g;b.med=1===f?l[0]:f%2?(l[Math.floor(f/2)]+l[Math.ceil(f/2)])/2:l[f/2];for(c=0;c<f;c++)n=l[c]-b.avg,n*=n,p+=n;b.stddev=Math.sqrt(p/
f);return b};this.getTimingWithDisplayLatency=function(a,b){var c=d[a]&&d[a][b];return c?c.end-c.start+100:-1}}});h.$Nav.when("$","sx.iss.utils","sx.iss.Events").build("sx.iss.A9SuggestionProvider",function(u,d,a){return function(b,c){function e(b){var e=++k,f,l;p=document.getElementsByTagName("head").item(0);y="JscriptId"+e;t=document.createElement("script");t.setAttribute("type","text/javascript");t.setAttribute("charset","utf-8");t.setAttribute("src",n);t.setAttribute("id",y);t.onload=
t.onreadystatechange=function(){if(!(f||this.readyState!==q&&"loaded"!==this.readyState&&"complete"!==this.readyState)){f=!0;l=m.call(g,b);this.onload=this.onreadystatechange=null;try{p.removeChild(t)}catch(k){}h.completion=q;d.timingProvider.stopTimer("a9",e);var n=a.createEvent("a9",c.suggestionsReady);d.eventBus.trigger(n,{searchTerm:b,suggestions:l})}};d.timingProvider.startTimer("a9",e);p.appendChild(t)}function m(a){var b=h.completion[1],c=2<h.completion.length?h.completion[2]:[],e=[],g,k,m,
l,n,t,p,r,y;m="aps"===document.getElementById("nav-search-keywords-data").getAttribute("data-implicit-alias");var u=!1;if(0<c.length&&c[0].nodes!==q&&!m&&f.issXCat){l=!1;for(g=0;g<c[0].nodes.length;g++)if("aps"===c[0].nodes[g].alias){l=!0;break}l||c[0].nodes.unshift({alias:"aps",name:f.apsName})}else 0<c.length&&c[0].nodes===q&&!m&&f.issXCat&&(c[0].nodes=[{alias:"aps",name:f.apsName}]);0===b.length&&0<a.length&&!m&&f.issXCat&&(b=[a],c=[{nodes:[{alias:"aps",name:f.apsName}]}],u=!0);for(g=0;g<b.length;g++)if(m=
b[g],l=encodeURIComponent(m),t=c&&c[g]&&"1"===c[g].sc,r=d.suggestionUtils.getPrefixPos(m,a),k=!1,f.issXCat&&c&&c[g]&&c[g].source&&c[g].source[0]&&(k="xo"===c[g].source[0]||"fb"===c[g].source[0]),t||-1===r?(r=m,y=p=""):(p=d.suggestionUtils.splitStringForDisplay(m,r,a.length),r=p.bprefix,y=p.prefix,p=p.suffix),u||k||e.push({type:"a9",spellCor:t,bprefix:r,prefix:y,suffix:p,keyword:m,url:"/s?k="+l}),n=c[g].nodes||[],!f.noXcats||f.issXCat)for(k=0;k<n.length;k++)e.push({type:"a9",spellCor:t,bprefix:r,prefix:y,
suffix:p,keyword:m,store:n[k].name,storeText:f.searchboxSearchInMessage+n[k].name,scope:n[k].alias,url:"/s?k="+l+"&i="+encodeURIComponent(n[k].alias)});return e||[]}var g=this,f=b||{},k=0,l,n,p,y,t;g.getName=function(){return"a9"};var r=a.createEvent("a9",c.suggestionsNeeded);d.eventBus.listen(r,function(b){if((l=b)&&l.length){var g;g=f.aliases.split(",");var k=f.implicitAlias;b={};var m="";b.aliases=k?[k]:g;b.aliases&&1===b.aliases.length&&(b.alias=b.aliases[0]);g=b.alias||"aps";b=u.extend({},{cid:"amazon-search-ui-mobile",
action:"",sugPrefix:"issDiv",callback:"String"},f);b.protocol=b.protocol||h.parent.document.location.protocol;k="&q="+encodeURIComponent(l)+"&search-alias="+g+"&client="+b.cid+"&mkt="+b.mkt+"&x="+b.callback;b.issPrimeEligible&&-1!==u.inArray(g,b.issPrimeEligible)?m="&pf=1&fb=0":f.issXCat&&(m="&fb=1");(n=b.protocol+"//"+b.src+"?method=completion"+k+m)&&e.call(this,l)}else b=a.createEvent("a9",c.suggestionsReady),d.eventBus.trigger(b,{searchTerm:l,suggestions:[]})},g)}});h.$Nav.when("sx.iss.utils").build("sx.iss.HelpSuggestionProvider",
function(h){var d=[{type:"help",pat:/^return/i,text:"Looking for help with returns? Try this.",url:""},{type:"help",pat:/^track/i,text:"Looking for help with tracking? Try this.",url:""},{type:"help",pat:/^gift[\s*]w/i,text:"Looking for help with gift wrapping? Try this.",url:""},{type:"help",pat:/^canc/i,text:"Looking for help with order cancellation? Try this.",url:""},{type:"help",pat:/^refu[\s*]/i,text:"Looking for help with refund? Try this.",url:""},{type:"help",pat:/^passw[\s*]/i,text:"Looking for help with passwords? Try this.",
url:""},{type:"help",pat:/^log(ging\s*)?o/i,text:"Looking for help with logging out? Try this.",url:""}];return function(){this.getName=function(){return"help"};h.eventBus.listen("help-suggestionsNeeded",function(a){var b,c=[];for(b=0;b<d.length;b++)a.match(d[b].pat)&&c.push(d[b]);h.eventBus.trigger("help-suggestionsReady",{searchTerm:a,suggestions:c})},this)}});h.$Nav.when("$","sx.iss.utils","sx.iss.Events").build("sx.iss.RecentSearchSuggestionProvider",function(u,d,a){return function(b){var c=
/[^\w]/;this.getName=function(){return"recent"};var e=a.createEvent("recent",b.suggestionsNeeded);d.eventBus.listen(e,function(e){var g=[];if(h.sx&&h.sx.searchsuggest&&h.sx.searchsuggest.searchedText){var f=h.sx.searchsuggest.searchedText,k={},l,n,p,y,t,r,x;x=e&&c.test(e)?u("<div></div>").text(e).html():e;for(y=0;y<f.length;y++)n=f[y].keywords,l=(l=n)&&c.test(l)?u("<div></div>").html(l).text():l,p=d.suggestionUtils.getPrefixPosMultiWord(n,x),k[n]||-1===d.suggestionUtils.getPrefixPosMultiWord(l,e)||
(-1===p?(p=n,r=t=""):(t=d.suggestionUtils.splitStringForDisplay(n,p,x.length),p=t.bprefix,r=t.prefix,t=t.suffix),g.push({type:"recent",spellCor:!1,bprefix:p,prefix:r,suffix:t,keyword:l,originalKeywords:n,deleteUrl:f[y].deleteUrl}),k[n]=1)}f=a.createEvent("recent",b.suggestionsReady);d.eventBus.trigger(f,{searchTerm:e,suggestions:g})},this)}});h.$Nav.when("$","sx.iss.utils","sx.iss.TemplateEngine").build("sx.iss.SuggestionDisplayProvider",function(h,d,a){return function(b,c,e){var d,g;
this.getDisplay=function(a){if(!d(a))return q;h.extend(a,e);return g(a)};d="string"===typeof b?function(a){return a.type===b}:b;g=a(c)}});h.$Nav.when("$","sx.iss.utils").build("sx.iss.SuggestionHighlightingProvider",function(h,d){return function(a){function b(a){a=a.currentTarget.id;f&&f.removeClass(f.attr("data-selected-class"));f=h("#"+a);g=parseInt(a.substr(6));f.addClass(f.attr("data-selected-class"))}function c(a){a=a.currentTarget.id;f&&f.attr("id")===a&&(f.removeClass(f.attr("data-selected-class")),
f=q,g=-1)}var e=this,m,g=-1,f;d.eventBus.listen(a.suggestionsDisplayed,function(a){var d;m=a;g=-1;f=q;for(a=0;a<m.suggestions.length;a++)d=h("#"+m.suggestions[a].suggestionId),d.bind("mouseover",e,b).bind("mouseout",e,c)},this).listen(a.upArrowPressed,function(){m&&(f&&f.removeClass(f.attr("data-selected-class")),g--,-1===g?d.eventBus.trigger(a.suggestionSelected,{keyword:m.searchTerm}):(-2===g&&(g=m.suggestions.length-1),f=h("#issDiv"+g),f.addClass(f.attr("data-selected-class")),d.eventBus.trigger(a.suggestionSelected,
m.suggestions[g])))},this).listen(a.downArrowPressed,function(){m&&(f&&f.removeClass(f.attr("data-selected-class")),g++,g===m.suggestions.length?(g=-1,d.eventBus.trigger(a.suggestionSelected,{keyword:m.searchTerm})):(f=h("#issDiv"+g),f.addClass(f.attr("data-selected-class")),d.eventBus.trigger(a.suggestionSelected,m.suggestions[g])))},this)}});h.$Nav.when("sx.iss.utils","sx.iss.TemplateEngine").build("sx.iss.IssDisplayProvider",function(h,d){return function(a,b,c,e){var m=d(a),g=0;h.eventBus.listen([e.parentFocused,
e.searchTermChanged],function(a){h.eventBus.trigger(e.suggestionsNeeded,a)},this).listen(e.suggestionsReady,function(a){var d=function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(a).replace(/[&<>"'\/]/g,function(a){return b[a]})}(a.searchTerm),l,n,p,y=g++;h.timingProvider.startTimer("IssDisplayProvider",y);n=b.sequence(a);for(a=0;a<n.length;a++){n[a].suggestionId="issDiv"+a;for(l=0;l<c.length&&!(p=c[l].getDisplay(n[a]));l++);n[a].display=p;p=q}p=
m({suggestions:n});h.timingProvider.stopTimer("IssDisplayProvider",y);h.eventBus.trigger(e.suggestionsReadyForDisplay,{searchTerm:d,display:p,suggestions:n})},this)}});h.$Nav.when("sx.iss.utils").build("sx.iss.A9SearchSuggestionEventHandler",function(h){return function(d){var a;this.getDelegateReqs=function(){return{selectors:".a9_suggestion,.suggestion_with_query_builder,.cross_category_suggestion",events:"click"}};this.handleEvent=function(b){var c=b.target||b.srcElement;b=parseInt(b.currentTarget.id.substr(6),
10);c.className&&-1!==c.className.indexOf("suggest_builder")?h.eventBus.trigger(d.updateSearchTerm,a.suggestions[b].keyword):h.eventBus.trigger(d.suggestionClicked,a.suggestions[b])};h.eventBus.listen(d.suggestionsDisplayed,function(b){a=b},this)}});h.$Nav.when("sx.iss.utils").build("sx.iss.RecentSearchSuggestionEventHandler",function(u){return function(d){function a(a){var b,c,f,k;b=location.protocol+"//"+location.host+a.deleteUrl;c=h.sx.searchsuggest.searchedText;for(f=0;f<c.length;f++)if(c[f].keywords===
a.originalKeywords){k=f;break}-1!==k&&c.splice(k,1);u.eventBus.trigger(d.focusOnParent);var l;h.XMLHttpRequest?l=new XMLHttpRequest:h.ActiveXObject&&(l=new ActiveXObject("Microsoft.XMLHTTP"));if(l&&b)try{l.open("GET",b,!0),l.send(null)}catch(n){}}var b=this,c;this.getDelegateReqs=function(){return{selectors:".recent_search_suggestion",events:"click"}};this.handleEvent=function(e){var m=e.target||e.srcElement;e=parseInt(e.currentTarget.id.substr(6),10);m.className&&-1!==m.className.indexOf("iss_sh_delete")?
a.call(b,c.suggestions[e]):u.eventBus.trigger(d.suggestionClicked,c.suggestions[e])};u.eventBus.listen(d.suggestionsDisplayed,function(a){c=a},this)}});h.$Nav.when("sx.iss.utils","sx.iss.Events").build("sx.iss.SuggestionAggregator",function(h,d){return function(a,b){function c(a){var c=e[a.searchTerm];if(a.suggestions&&a.suggestions[0]&&a.suggestions[0].type&&(c.suggestionsSets[a.suggestions[0].type]=a,"a9"===a.suggestions[0].type)){a=c.suggestionsSets.a9.suggestions;for(var d=0;d<a.length;d++)a[d].scope&&
(a[d].type="a9xc")}--c.remaining||(delete e[c.searchTerm],h.eventBus.trigger(b.suggestionsReady,c))}for(var e={},m=0;m<a.length;m++){var g=d.createEvent(a[m],b.suggestionsReady);h.eventBus.listen(g,c,this)}h.eventBus.listen(b.suggestionsNeeded,function(c){if(!e[c]){e[c]={remaining:a.length,searchTerm:c,suggestionsSets:{}};for(var g=0;g<a.length;g++){var m=d.createEvent(a[g],b.suggestionsNeeded);h.eventBus.trigger(m,c)}}},this)}});h.$Nav.when("sx.iss.utils").build("sx.iss.SuggestionSequencerMobile",
function(h){return function(){this.sequence=function(d){var a=d.suggestionsSets,b=a.recent;d=a.a9;var c=a.crossCategory,a=d&&d.suggestions&&0<d.suggestions.length?d.suggestions.length:0,e=c&&c.suggestions&&0<c.suggestions.length?c.suggestions.length:0,m=6,g,f=[],k={},m=Math.min(b&&b.suggestions&&0<b.suggestions.length?b.suggestions.length:0,0<a?2:6);for(g=0;g<e;g++)f.push(c.suggestions[g]);for(g=0;g<m;g++)k[b.suggestions[g].keyword]=!0,f.push(b.suggestions[g]);m=Math.min(a,6-f.length);for(b=g=0;g<
a&&b<m;g++)k[d.suggestions[g].keyword]||(b++,f.push(d.suggestions[g]));for(g=0;g<f.length;g++)f[g].dispIdx=g;return f}}});h.$Nav.when("$","sx.iss.utils","sx.iss.Events").build("sx.iss.IssParentCoordinatorMobile",function(u,d,a){return function(a,c,e,m,g){function f(a){return a.charCode?a.target.value+String.fromCharCode(a.charCode):a.target.value}function k(){}function l(){x&&(x.remove(),x=q)}function n(a,b){if(a&&0<a.length)a.attr("value",b.value);else if(b.hasOwnProperty("value")&&
b.value){a=u("<input>");for(var c in b)b.hasOwnProperty(c)&&a.attr(c,b[c]);a.appendTo(D)}}function p(){var a=document.getElementById("issprefix"),b=document.getElementById("issAlias");return x?(v=setTimeout(function(){v=null;l();a&&D[0].removeChild(a);b&&D[0].removeChild(b)},300),!1):!0}function y(){h.setTimeout(function(){a.focus()},0)}function t(a){"focus"===a.type?(r=!0,v&&(clearTimeout(v),v=null),w=f(a),d.eventBus.trigger(g.parentFocused,w)):"keyup"===a.type&&(13===a.keyCode?l():27===a.keyCode?
p():(B=w=f(a),d.eventBus.triggerThrottledEvent(g.searchTermChanged,w,100)))}var r,x,D,z,v=null,B,w,P=m.implicitAlias,A=m.issXCat,O=!1;z=u(a);a=u(a);c=c?u(c):a.parent();D=a.closest("form");e=e||[];B=a.val();a.bind("focus",this,t).bind("keyup",this,t);u(document.body).bind("click",this,function(c){var e=u(c.target||c.srcElement),f=e.hasClass("suggest_builder"),e=e.hasClass("iss_sh_delete");"click"!==c.type||document.activeElement==a[0]||e||f||(r=!1,d.eventBus.trigger(g.parentLostFocus),p())});u(document).bind("searchAjaxTransition",
this,l);h.setInterval(function(){var c=a.val();c!==w&&(w=B=c,d.eventBus.triggerThrottledEvent(g.searchTermChanged,w,100))},20);d.eventBus.listen(g.suggestionsReadyForDisplay,function(a){var b,f;if(r&&a&&w===a.searchTerm)if(a.suggestions&&0!==a.suggestions.length){b=u(a.display);A&&!O&&(O=!0,ue.count("SEARCH:IssXCatImpression",1));if(x)x.html(b.children());else for(x=b,c.after(x),b=0;b<e.length;b++)f=e[b].getDelegateReqs(),x.delegate(f.selectors,f.events,e[b],function(a){return a.data.handleEvent(a)});
u(h).resize(k);d.eventBus.trigger(g.suggestionsDisplayed,a)}else l()},this).listen(g.suggestionClicked,function(c){var e;a.val(c.keyword);w=c.keyword;var d;e=B;var f=c.dispIdx;if(0<=f){c.spellCor?d="ss_sc":"recent"===c.type?d="ss_sh":A?"a9xc"===c.type?d="aps"===c.scope?"ss_c_aw_aps":"ss_c_aw_cat":(c.scope=P,d="ss_i"):d="crossCategory"===c.type?"aps"===c.scope?"ss_c_aw_aps":"ss_c_aw_cat":"ss_i";A&&"a9xc"===c.type?ue.count("SEARCH:IssXCatClick",1):A&&ue.count("SEARCH:IssTopCatClick",1);if(A){var g=
c.scope?c.scope:P,k;"a9xc"===c.type&&A&&((k=u("input[name='n']"))&&0<k.length&&n(k,{value:"",name:"n",type:"hidden"}),(k=u("input[name='bbn']"))&&0<k.length&&n(k,{value:"",name:"bbn",type:"hidden"}),(k=u("input[name='srs']"))&&0<k.length&&n(k,{value:"",name:"srs",type:"hidden"}));n(u("#issAlias"),{value:"i:"+g,name:"rh",type:"hidden"});(k=u("input[name='search-alias']"))&&0<k.length&&n(k,{value:g,name:"search-alias",type:"hidden"});k=u("input[name='n']");"aps"===g&&k&&0<k.length&&n(k,{value:"",name:"n",
type:"hidden"});k=u("input[name='srs']");"aps"===g&&k&&0<k.length&&n(k,{value:"",name:"srs",type:"hidden"});k=u("input[name='bbn']");"aps"===g&&k&&0<k.length&&n(k,{value:"",name:"bbn",type:"hidden"})}g="";A&&c.scope&&(g=c.scope);c=d;d=e.length;k=D[0].getAttribute("action");var m=/(ref=[\w-]+)/,f=c+"_"+f+"_"+d;g&&0<g.length&&(f=f+"_"+g);m.test(k)?k=k.replace(m,"ref=is_s_"+f):("/"!=k.charAt(k.length-1)&&(k+="/"),k+="ref=is_s_"+f);D[0].setAttribute("action",k);n(u("#issprefix"),{value:e,name:"sprefix",
type:"hidden"})}if(document.createEvent&&(e=document.createEvent("Event"),e.initEvent("submit",!0,!0),!D[0].dispatchEvent(e)))return;D[0].submit()},this).listen(g.focusOnParent,y,this).listen(g.updateSearchTerm,function(a){w=a;z.val(a);y()},this)}});h.$Nav.importEvent("jQuery",{as:"$",global:"jQuery"});h.$Nav.when("sx.iss.Events","sx.iss.A9SuggestionProvider","sx.iss.A9SearchSuggestionEventHandler","sx.iss.HelpSuggestionProvider","sx.iss.RecentSearchSuggestionProvider","sx.iss.RecentSearchSuggestionEventHandler",
"sx.iss.SuggestionHighlightingProvider","sx.iss.SuggestionAggregator","sx.iss.SuggestionSequencerMobile","sx.iss.SuggestionDisplayProvider","sx.iss.IssDisplayProvider","sx.iss.IssParentCoordinatorMobile").build("sx.iss",function(h,d,a,b,c,e,m,g,f,k,l,n){return{Events:h,A9SuggestionProvider:d,A9SearchSuggestionEventHandler:a,HelpSuggestionProvider:b,RecentSearchSuggestionProvider:c,RecentSearchSuggestionEventHandler:e,SuggestionHighlightingProvider:m,SuggestionAggregator:g,SuggestionSequencerMobile:f,
SuggestionDisplayProvider:k,IssDisplayProvider:l,IssParentCoordinatorMobile:n}});h.$Nav.when("sx.iss").run(function(u){h.$Nav.publish("sx.iss",u)});h.$Nav.when("$","sx.iss.SuggestionTypes").build("sx.iss.FilterIss",function(h,d){return function(a){return{removeFilteredAliases:function(b){a.filterAliases&&b[d.a9Xcat.name]&&(b[d.a9Xcat.name]=h.grep(b[d.a9Xcat.name],function(b){return-1===h.inArray(b.alias,a.filterAliases)}));return b}}}})})})(function(){var C=window.AmazonUIPageJS||window.P,
h=C._namespace||C.attributeErrors;return h?h("RetailSearchAutocompleteAssets"):C}(),window);